<!DOCTYPE html>
<!-- saved from url=(0067)https://preshing.com/20110920/the-python-with-statement-by-example/ -->
<html class="js video maskImage placeholder translated-ltr" lang="pt"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <title>A instrução Python "with" por exemplo</title>
  <meta name="author" content="Jeff Preshing">

  
  
  <meta name="description" content="Python’s with statement was first introduced five years ago, in Python 2.5. It’s handy when you have two related operations which you’d like to execute as a pair …">
  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  <link rel="canonical" href="https://preshing.com/20110920/the-python-with-statement-by-example">
  <link href="https://preshing.com/favicon.png" rel="icon">
  <link href="./A instrução Python _with_ por exemplo_files/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="https://preshing.com/feed" rel="alternate" title="Preshing na programação" type="application/atom+xml">
  <script type="text/javascript" async="" src="./A instrução Python _with_ por exemplo_files/ga.js.download"></script><script src="./A instrução Python _with_ por exemplo_files/modernizr-2.0.js.download"></script>
  <script src="./A instrução Python _with_ por exemplo_files/jquery.min.js.download"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="./A instrução Python _with_ por exemplo_files/octopress.js.download" type="text/javascript"></script>
  
  <script type="text/javascript" src="./A instrução Python _with_ por exemplo_files/MathJax.js.download"></script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-44017752-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


<style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><script type="text/javascript" src="./A instrução Python _with_ por exemplo_files/genericCommentWrapper2.php"></script><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><link rel="stylesheet" href="./A instrução Python _with_ por exemplo_files/idcCSS.php" type="text/css"><script src="./A instrução Python _with_ por exemplo_files/comment-func.php" type="text/javascript"></script><script src="./A instrução Python _with_ por exemplo_files/remote-login.php" type="text/javascript"></script><link type="text/css" rel="stylesheet" charset="UTF-8" href="./A instrução Python _with_ por exemplo_files/translateelement.css"></head>

<body><div id="MathJax_Message" style="display: none;"></div>
  <header role="banner"><hgroup>
  <h1><a href="https://preshing.com/"><img src="./A instrução Python _with_ por exemplo_files/header.png" alt="Preshing na programação"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preshing na programação</font></font></a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="https://twitter.com/preshing" rel="follow-twitter" title="Siga no Twitter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Twitter</font></font></a></li>
  <li><a href="https://preshing.com/feed" rel="subscribe-rss" title="Assine por RSS"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSS</font></font></a></li>
  
</ul>
  
<fieldset class="mobile-nav"><select><option value=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Navegar…</font></font></option><option value="https://preshing.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">» Blogue</font></font></option><option value="https://preshing.com/archives"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">» Arquivos</font></font></option><option value="https://preshing.com/about"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" Sobre</font></font></option><option value="https://preshing.com/contact"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" Contato</font></font></option><option value="https://twitter.com/preshing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" Twitter</font></font></option><option value="https://preshing.com/feed"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">» RSS</font></font></option></select></fieldset><ul class="main-navigation">
  <li><a href="https://preshing.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blogue</font></font></a></li>
  <li><a href="https://preshing.com/archives"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquivos</font></font></a></li>
  <li><a href="https://preshing.com/about"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre</font></font></a></li>
  <li><a href="https://preshing.com/contact"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contato</font></font></a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <p class="meta">
        








  


<time datetime="2011-09-20T09:09:10-04:00" pubdate="" data-updated="true"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20 de setembro de 2011</font></font></time>
        
      </p>
    
    
      <h1 class="entry-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A instrução Python "with" por exemplo</font></font></h1>
    
  </header>


<div class="entry-content"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A declaração do Python </font></font><a href="http://docs.python.org/reference/compound_stmts.html#the-with-statement"><code>with</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foi introduzida pela primeira vez há cinco anos, no Python 2.5. </font><font style="vertical-align: inherit;">É útil quando você tem duas operações relacionadas que gostaria de executar como um par, com um bloco de código entre elas. </font><font style="vertical-align: inherit;">O exemplo clássico é abrir um arquivo, manipular o arquivo e fechá-lo:</font></font></p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com </font></font></span> <span class="predefined"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">open</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="string"><span class="delimiter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">' </font></font></span><span class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">output.txt </font></font></span><span class="delimiter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'</font></font></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="string"><span class="delimiter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">' </font></font></span><span class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">w </font></font></span><span class="delimiter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'</font></font></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    f.write( </font></font><span class="string"><span class="delimiter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">' </font></font></span><span class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Olá! </font></font></span><span class="delimiter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'</font></font></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )
</font></font></pre></div>
</div>
</div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução acima fechará automaticamente o arquivo após o bloco de código aninhado. </font><font style="vertical-align: inherit;">(Continue lendo para ver exatamente como o fechamento ocorre.) A vantagem de usar uma </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução é que ela garante o fechamento do arquivo, não importa </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o bloco aninhado saia. </font><font style="vertical-align: inherit;">Se ocorrer uma exceção antes do final do bloco, ele fechará o arquivo antes que a exceção seja capturada por um manipulador de exceção externo. </font><font style="vertical-align: inherit;">Se o bloco aninhado contiver uma </font></font><code>return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução, ou uma instrução </font></font><code>continue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code>break</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, a </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução também fechará automaticamente o arquivo nesses casos.</font></font></p>

<!-- more -->
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui está outro exemplo. </font><font style="vertical-align: inherit;">A biblioteca de desenho </font></font><a href="http://cairographics.org/pycairo/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pycairo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contém uma </font></font><code>Context</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe que expõe um </font></font><a href="http://cairographics.org/documentation/pycairo/2/reference/context.html#cairo.Context.save"><code>save</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método para enviar o estado de desenho atual em uma pilha interna e um </font></font><a href="http://cairographics.org/documentation/pycairo/2/reference/context.html#cairo.Context.restore"><code>restore</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método para restaurar o estado de desenho da pilha. </font><font style="vertical-align: inherit;">Essas duas funções são sempre chamadas em um par, com algum código entre elas.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este exemplo de código usa um </font></font><code>Context</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objeto (“contexto Cairo”) para desenhar seis retângulos, cada um com uma rotação diferente. </font><font style="vertical-align: inherit;">Cada chamada para </font></font><a href="http://cairographics.org/documentation/pycairo/2/reference/context.html#cairo.Context.rotate"><code>rotate</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é, na verdade, combinada com a transformação atual, portanto, usamos um par de chamadas para </font></font><code>save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>restore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para preservar o estado de desenho em cada iteração do loop. </font><font style="vertical-align: inherit;">Isso evita que as rotações se combinem:</font></font></p>

<div><div class="CodeRay">
  <div class="code"><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cr.translate( </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">68</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">68</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )
 </font></font><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> i </font></font><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em </font></font></span> <span class="predefined"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xrange</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    cr. </font></font><span class="highlight"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">salvar</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    cr. </font></font><span class="highlight"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">girar</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * math.pi * i / </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    cr.retângulo(- </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , - </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">60</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">40</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    cr.stroke()</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    cr. </font></font><span class="highlight"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">restaurar</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ()
</font></font></pre></div>
</div>
</div>

<p><img class="center" src="./A instrução Python _with_ por exemplo_files/six-rectangles.png"></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esse é um exemplo bastante simples, mas para scripts maiores, pode se tornar complicado acompanhar qual </font></font><code>save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">combina com qual </font></font><code>restore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e mantê-los corretamente combinados. </font><font style="vertical-align: inherit;">A </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">declaração pode ajudar a arrumar as coisas um pouco.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por si só, pycairo's </font></font><code>save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>restore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">métodos não suportam a </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução, então teremos que adicionar o suporte por conta própria. </font><font style="vertical-align: inherit;">Existem duas maneiras de suportar a </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução: implementando uma classe de gerenciador de contexto ou escrevendo uma função geradora. </font><font style="vertical-align: inherit;">Vou demonstrar ambas as abordagens.</font></font></p>

<h2 id="implementing-the-context-manager-as-a-class"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementando o Context Manager como uma classe</font></font></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui está a primeira abordagem. </font><font style="vertical-align: inherit;">Para implementar um gerenciador de contexto, definimos uma classe contendo um método </font></font><code>__enter__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>__exit__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">A classe abaixo aceita um contexto cairo, </font></font><code>cr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, em seu construtor:</font></font></p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">class </font></font></span> <span class="class"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Salvo</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ():
     </font></font><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">def </font></font></span> <span class="function"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__init__</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="predefined-constant"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">self</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , cr):
         </font></font><span class="predefined-constant"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">self</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .cr = cr
     </font></font><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">def </font></font></span> <span class="highlight"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__enter__</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="predefined-constant"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">self</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):
         </font></font><span class="predefined-constant"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">self</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .cr.save()
         </font></font><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font></span> <span class="predefined-constant"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">self</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .cr
     </font></font><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">def </font></font></span> <span class="highlight"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__exit__</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="predefined-constant"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">self</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="predefined"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , value, traceback):
         </font></font><span class="predefined-constant"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">self</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .cr .restaurar()
</font></font></pre></div>
</div>
</div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Graças a esses dois métodos, é válido instanciar um </font></font><code>Saved</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objeto e usá-lo em uma </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">declaração. </font><font style="vertical-align: inherit;">O </font></font><code>Saved</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objeto é considerado o </font></font><a href="http://docs.python.org/reference/datamodel.html#context-managers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gerenciador de contexto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<div><div class="CodeRay">
  <div class="code"><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cr.translate( </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">68</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">68</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )
 </font></font><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> i </font></font><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em </font></font></span> <span class="predefined"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xrange</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):
     </font></font><span class="highlight"><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Saved(cr):</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        cr.rotate( </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * math.pi * i / </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        cr.retângulo(- </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , - </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">60</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">40</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        cr.stroke()</font></font><font></font>
</pre></div>
</div>
</div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui estão as etapas exatas tomadas pelo interpretador Python quando ele atinge a </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução:</font></font></p>

<ol>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução armazena o </font></font><code>Saved</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objeto em uma variável oculta temporária, pois será necessária mais tarde. </font><font style="vertical-align: inherit;">(Na verdade, ele armazena apenas o </font></font><code>__exit__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método vinculado, mas isso é um detalhe.)</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução chama </font></font><code>__enter__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o </font></font><code>Saved</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objeto, dando ao gerenciador de contexto a chance de fazer seu trabalho.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O </font></font><code>__enter__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método chama </font></font><code>save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o contexto cairo.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O </font></font><code>__enter__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método retorna o contexto cairo, mas como você pode ver, não especificamos a </font></font><a href="http://docs.python.org/reference/compound_stmts.html#the-with-statement"><code>"as" target</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parte opcional da </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução. </font><font style="vertical-align: inherit;">Portanto, o valor de retorno não é salvo em nenhum lugar. </font><font style="vertical-align: inherit;">Nós não precisamos disso; </font><font style="vertical-align: inherit;">sabemos que é o mesmo contexto do Cairo que passamos.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O bloco de código aninhado é executado. </font><font style="vertical-align: inherit;">Ele configura a rotação e desenha um retângulo.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao final do bloco aninhado, a </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução chama o método </font></font><code>Saved</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do objeto </font></font><code>__exit__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, passando os argumentos </font></font><code>(None, None, None)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para indicar que não ocorreu nenhuma exceção.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O </font></font><code>__exit__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método chama </font></font><code>restore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o contexto cairo.</font></font></li>
</ol>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma vez que entendemos o que o interpretador Python está fazendo, podemos entender melhor o exemplo no início desta postagem do blog, onde abrimos um arquivo na </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução: Objetos de arquivo expõem seus próprios métodos </font></font><code>__enter__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>__exit__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, portanto, podem agir como seus próprios gerenciadores de contexto. </font><font style="vertical-align: inherit;">Especificamente, o </font></font><code>__exit__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método fecha o arquivo.</font></font></p>

<h3 id="exception-handling"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manipulação de exceção</font></font></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voltando ao exemplo de desenho, o que acontece se ocorrer uma exceção dentro do bloco de código aninhado? </font><font style="vertical-align: inherit;">Por exemplo, suponha que passamos erroneamente o número errado de argumentos para a </font></font><code>rectangle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chamada. </font><font style="vertical-align: inherit;">Nesse caso, as etapas executadas pelo interpretador Python seriam:</font></font></p>

<ol>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O </font></font><code>rectangle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método gera uma </font></font><code>TypeError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exceção: “Context.rectangle() recebe exatamente 4 argumentos.”</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução captura essa exceção.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução chama </font></font><code>__exit__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o </font></font><code>Saved</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objeto. </font><font style="vertical-align: inherit;">Ele passa informações sobre a exceção em três argumentos: ( </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">value</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">traceback</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) – os mesmos valores que você obteria chamando </font></font><a href="http://docs.python.org/library/sys.html#sys.exc_info"><code>sys.exc_info</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Isso informa ao </font></font><code>__exit__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método tudo o que ele precisa saber sobre a exceção que ocorreu.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nesse caso, nosso </font></font><code>__exit__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método não se importa particularmente. </font><font style="vertical-align: inherit;">Ele chama </font></font><code>restore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o contexto cairo de qualquer maneira e retorna </font></font><code>None</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">(Em Python, quando nenhuma </font></font><code>return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução é especificada, a função realmente retorna </font></font><code>None</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.)</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução verifica se esse valor de retorno é verdadeiro. </font><font style="vertical-align: inherit;">Como não é, a </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução reativa a </font></font><code>TypeError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exceção para ser tratada por outra pessoa.</font></font></li>
</ol>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desta forma, podemos garantir que </font></font><code>restore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sempre será chamado no contexto cairo, ocorrendo ou não uma exceção.</font></font></p>

<h2 id="implementing-the-context-manager-as-a-generator"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementando o Context Manager como um gerador</font></font></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Isso nos leva à segunda abordagem para apoiar a </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">afirmação. </font><font style="vertical-align: inherit;">Em vez de implementar uma classe para o gerenciador de contexto, podemos escrever uma </font></font><a href="http://docs.python.org/tutorial/classes.html#generators"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">função geradora</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Aqui está um exemplo simplificado de uma função geradora. </font><font style="vertical-align: inherit;">Deixe-me apontar imediatamente que este exemplo está incompleto, pois não trata muito bem as exceções. </font><font style="vertical-align: inherit;">Continue lendo para mais detalhes:</font></font></p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do </font></font></span> <span class="include"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contextlib </font></font></span> <span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">import </font></font></span> <span class="include"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contextmanager</font></font></span><font></font>
<font></font>
<span class="decorator"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@contextmanager </font></font></span>
<span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">def </font></font></span> <span class="function"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">salvo</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (cr):</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    cr.save()</font></font><font></font>
    <span class="highlight"><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rendimento</font></font></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cr</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    cr.restore()</font></font><font></font>
</pre></div>
</div>
</div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Há um certo charme em escrever um gerador como este. </font><font style="vertical-align: inherit;">À primeira vista, parece mais simples do que a abordagem anterior: uma única função substitui uma definição de classe inteira. </font><font style="vertical-align: inherit;">Mas não se engane! </font><font style="vertical-align: inherit;">Essa abordagem envolve muito mais etapas e muito mais complexidade do que a abordagem anterior. </font><font style="vertical-align: inherit;">Levei várias leituras do </font></font><a href="http://www.python.org/dev/peps/pep-0343/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PEP 343</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> – que é mais um documento histórico do que uma referência – antes que eu pudesse afirmar que o entendi completamente. </font><font style="vertical-align: inherit;">Requer familiaridade com decoradores, geradores, iteradores e funções de retorno de funções do Python, além da programação orientada a objetos e tratamento de exceções que já vimos.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para fazer este gerador funcionar, </font></font><a href="http://docs.python.org/library/contextlib.html"><code>contextlib</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">são necessárias duas entidades de , um módulo padrão do Python: a </font></font><code>contextmanager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">função e uma classe interna chamada </font></font><code>GeneratorContextManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">O código fonte, </font></font><a href="http://hg.python.org/cpython/file/2.7/Lib/contextlib.py"><code>contextlib.py</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, é um pouco cabeludo, mas pelo menos é curto. </font><font style="vertical-align: inherit;">Vou simplesmente descrever o que acontece, e você pode consultar o código-fonte e quaisquer outros materiais complementares, conforme necessário.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vamos começar com o próprio gerador. </font><font style="vertical-align: inherit;">Veja o que acontece quando o trecho de código acima é executado:</font></font></p>

<ol>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O interpretador Python reconhece a </font></font><a href="http://docs.python.org/reference/expressions.html#yield-expressions"><code>yield</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução no meio da definição da função. </font><font style="vertical-align: inherit;">Como resultado, a </font></font><code>def</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução não cria uma função normal; </font><font style="vertical-align: inherit;">ele cria uma função geradora.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Devido à presença do </font></font><code>@contextmanager</code> <a href="http://docs.python.org/glossary.html#term-decorator"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">decorador</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><code>contextmanager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é chamado com a função geradora como argumento.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font><code>contextmanager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">função retorna uma função “factory”, que cria </font></font><code>GeneratorContextManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objetos agrupados em torno do gerador fornecido. </font><font style="vertical-align: inherit;">(linha 83 de </font></font><code>contextlib.py</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finalmente, a função de fábrica é atribuída a </font></font><code>saved</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Deste ponto em diante, quando chamarmos </font></font><code>saved</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, estaremos na verdade chamando a função de fábrica.</font></font></li>
</ol>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Equipado com todas essas coisas boas, agora podemos escrever:</font></font></p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> i </font></font><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em </font></font></span> <span class="predefined"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xrange</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):
     </font></font><span class="highlight"><span class="keyword"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> saved(cr):</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        cr.rotate( </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * math.pi * i / </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        cr.retângulo(- </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , - </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">60</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="integer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">40</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        cr.stroke()</font></font><font></font>
</pre></div>
</div>
</div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui estão todos os passos executados pelo interpretador Python quando ele alcança a </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução.</font></font></p>

<ol>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução chama </font></font><code>saved</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que obviamente chama a função de fábrica, passando </font></font><code>cr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, um contexto cairo, como seu único argumento.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A função fábrica passa o contexto cairo para nossa função geradora, criando um </font></font><a href="http://docs.python.org/reference/expressions.html#yield-expressions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gerador</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O gerador é passado para o construtor de </font></font><code>GeneratorContextManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, uma classe interna que atuará como nosso gerenciador de contexto.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução salva o </font></font><code>GeneratorContextManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objeto em uma variável oculta temporária. </font><font style="vertical-align: inherit;">(Na verdade, ele armazena apenas o </font></font><code>__exit__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método vinculado, mas isso é um detalhe.)</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução chama </font></font><code>__enter__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o </font></font><code>GeneratorContextManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objeto.</font></font></li>
  <li><code>__enter__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chama </font></font><a href="http://docs.python.org/reference/expressions.html#generator.next"><code>next</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o gerador.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nossa função geradora – o bloco de código que definimos </font></font><code>def saved(cr)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">– é executada até a </font></font><code>yield</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução. </font><font style="vertical-align: inherit;">Isso chama </font></font><code>save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o contexto do Cairo.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font><code>yield</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução produz o contexto cairo, que se torna o valor de retorno da chamada para </font></font><code>next</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o iterador.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O </font></font><code>__enter__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método retorna o contexto cairo, mas como você pode ver, não especificamos a </font></font><code>"as" target</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parte opcional da </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução. </font><font style="vertical-align: inherit;">Portanto, o valor de retorno não é salvo em nenhum lugar. </font><font style="vertical-align: inherit;">Nós não precisamos disso; </font><font style="vertical-align: inherit;">sabemos que é o mesmo contexto do Cairo que passamos.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O bloco de código aninhado é executado. </font><font style="vertical-align: inherit;">Ele configura a rotação e desenha um retângulo.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No final do bloco aninhado, a </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução chama o </font></font><code>__exit__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método no </font></font><code>GeneratorContextManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objeto, passando os argumentos </font></font><code>(None, None, None)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para indicar que não ocorreu nenhuma exceção.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O </font></font><code>__exit__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método chama </font></font><code>next</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o iterador (esperando uma </font></font><code>StopIteration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exceção).</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nosso gerador retoma a execução após a </font></font><code>yield</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução. </font><font style="vertical-align: inherit;">Isso chama </font></font><code>restore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o contexto do Cairo.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O gerador retorna, gerando uma </font></font><code>StopIteration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exceção (como esperado).</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O </font></font><code>__exit__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método captura a </font></font><code>StopIteration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exceção e retorna normalmente.</font></font></li>
</ol>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E é isso! </font><font style="vertical-align: inherit;">Usamos com sucesso esta função geradora como um </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gerenciador de contexto de instrução. </font><font style="vertical-align: inherit;">Neste exemplo, ajudou que nenhuma exceção ocorreu. </font><font style="vertical-align: inherit;">Para lidar corretamente com as exceções, teremos que melhorar um pouco a função do gerador.</font></font></p>

<h3 id="exception-handling-1">Exception Handling</h3>

<p>Now, what happens if an exception occurs within the nested block while using this approach? Again, let’s suppose we’ve mistakenly passed the wrong number of arguments to the <code>rectangle</code> call. Here’s what would happen:</p>

<ol>
  <li>The <code>rectangle</code> method raises a <code>TypeError</code> exception: “Context.rectangle() takes exactly 4 arguments.”</li>
  <li>The <code>with</code> statement catches this exception.</li>
  <li>The <code>with</code> statement calls <code>__exit__</code> on the <code>GeneratorContextManager</code> object. It passes information about the exception in three arguments: (<em>type</em>, <em>value</em>, <em>traceback</em>).</li>
  <li><code>__exit__</code> calls <a href="http://docs.python.org/reference/expressions.html#generator.throw"><code>throw</code></a> on the iterator, passing the same three arguments.</li>
  <li>The <code>TypeError</code> exception is raised in the context of our generator function, on the line containing the <code>yield</code> statement.</li>
</ol>

<p>Uh oh! At this point, our current generator function has a problem: <code>restore</code> will <em>not</em> be called on the cairo context. An exception has been raised on the line containing the <code>yield</code> statement, so the rest of the generator function will not be executed. We need to make the generator more robust, by inserting a <a href="http://docs.python.org/tutorial/errors.html#defining-clean-up-actions"><code>try/finally</code></a> block around the <code>yield</code>:</p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="decorator">@contextmanager</span>
<span class="keyword">def</span> <span class="function">saved</span>(cr):<font></font>
    cr.save()<font></font>
    <span class="highlight"><span class="keyword">try</span></span>:
        <span class="keyword">yield</span> cr
    <span class="highlight"><span class="keyword">finally</span></span>:<font></font>
        cr.restore()<font></font>
</pre></div>
</div>
</div>

<p>Continuing where we left off:</p>

<ol>
  <li>Inside our generator, the <code>finally</code> block executes. This calls <code>restore</code> on the cairo context.</li>
  <li>The <code>TypeError</code> exception went unhandled by the generator, so it is re-raised in the <code>__exit__</code> method, on the line containing the call to <code>throw</code> on the iterator. (line 35 of <code>contextlib.py</code>)</li>
  <li>The <code>TypeError</code> exception is caught by <code>__exit__</code>.</li>
  <li><code>__exit__</code> sees that the exception caught is the same exception that was passed in, and as a result, returns <code>None</code>.</li>
  <li>The <code>with</code> statement checks to see whether this return value is true. Since it isn’t, the <code>with</code> statement re-raises the <code>TypeError</code> exception, to be handled by someone else.</li>
</ol>

<p>Thus concludes our journey through the Python <code>with</code> statement. If, like me, you’ve had a hard time understanding this statement completely – especially if you were attracted to the generator form of writing context managers – don’t feel bad. It’s complicated! It cleverly ties together several of Python’s language features, many of which were themselves introduced fairly recently in Python’s history. If any Pythonistas out there spot an error or oversight in the above explanation, please let me know in the comments.</p>

<h2 id="drawing-a-fractal-tree">Drawing a Fractal Tree</h2>

<p>For those of you who have endured the entire blog post up to this point, here’s a small bonus script. It uses our newly minted cairo context manager to recursively draw a fractal tree.</p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="keyword">import</span> <span class="include">cairo</span>
<span class="keyword">from</span> <span class="include">contextlib</span> <span class="keyword">import</span> <span class="include">contextmanager</span><font></font>
<font></font>
<span class="decorator">@contextmanager</span>
<span class="keyword">def</span> <span class="function">saved</span>(cr):<font></font>
    cr.save()<font></font>
    <span class="keyword">try</span>:
        <span class="keyword">yield</span> cr
    <span class="keyword">finally</span>:<font></font>
        cr.restore()<font></font>
<font></font>
<span class="keyword">def</span> <span class="function">Tree</span>(angle):<font></font>
    cr.move_to(<span class="integer">0</span>, <span class="integer">0</span>)<font></font>
    cr.translate(<span class="integer">0</span>, -<span class="integer">65</span>)<font></font>
    cr.line_to(<span class="integer">0</span>, <span class="integer">0</span>)<font></font>
    cr.stroke()<font></font>
    cr.scale(<span class="float">0.72</span>, <span class="float">0.72</span>)
    <span class="keyword">if</span> angle &gt; <span class="float">0.12</span>:
        <span class="keyword">for</span> a <span class="keyword">in</span> [-angle, angle]:
            <span class="highlight"><span class="keyword">with</span> saved(cr):</span><font></font>
                cr.rotate(a)<font></font>
                Tree(angle * <span class="float">0.75</span>)<font></font>
<font></font>
surf = cairo.ImageSurface(cairo.FORMAT_ARGB32, <span class="integer">280</span>, <span class="integer">204</span>)<font></font>
cr = cairo.Context(surf)<font></font>
cr.translate(<span class="integer">140</span>, <span class="integer">203</span>)<font></font>
cr.set_line_width(<span class="integer">5</span>)<font></font>
Tree(<span class="float">0.75</span>)<font></font>
surf.write_to_png(<span class="string"><span class="delimiter">'</span><span class="content">fractal-tree.png</span><span class="delimiter">'</span></span>)
</pre></div>
</div>
</div>

<p><img class="center" src="./A instrução Python _with_ por exemplo_files/tree.png"></p>

<p>For yet another example of <code>with</code> statement usage in Python, see <a href="http://preshing.com/20110924/timing-your-code-using-pythons-with-statement">Timing Your Code Using Python’s “with” Statement</a>.</p>
</div>



  

  <footer>
    <p class="meta">
      
        <a class="basic-alignment left" href="https://preshing.com/20110831/penrose-tiling-explained" title="Post anterior: Explicação dos azulejos de Penrose">« Penrose Tiling Explained</a>
      
      
        <a class="basic-alignment right" href="https://preshing.com/20110924/timing-your-code-using-pythons-with-statement" title="Próximo post: Cronometrando seu código usando Python" with"="" statement"="">Timing Your Code Using Python's "with" Statement »</a>
      
    </p>
  </footer>
</article>

<section>
<div id="comment-section">
<script>
var idcomments_acct = 'b741f3bade873745e10e70447d732c8c';
var idcomments_post_id = '1651';
var idcomments_post_url;
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<div id="idc-container-parent" class=""><div id="idc-container" class="idc"><div id="IDCommentPopup" style="display: none;" class="idc-info"> <div> <div id="IDCommentPopupInner"> <a href="https://preshing.com/20110920/the-python-with-statement-by-example/#" class="idc-close"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fechar</font></font></span></a> <h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esqueceu a senha?</font></font></h6> <form> <label for="txtResolveEmail"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por favor coloque seu e-mail:</font></font></label> <input class="idc-text" id="txtResolveEmail" type="text"> <a href="https://preshing.com/20110920/the-python-with-statement-by-example/#" class="idc-btn_s"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Me envie minha senha!</font></font></span></a> </form> <p class="idc-bottom"><a href="https://preshing.com/20110920/the-python-with-statement-by-example/#">Close message</a></p> </div> <div class="idc-bottom"></div> </div> </div><div id="IDCommentsHead" class="idc-head"> <span id="IDCommentsHeadDivider" style="display:none"></span> <div class="idc-right"> <a href="javascript: showLogin();" id="IDCommentsHeadLogin" class="idc-head_tools-login"><span>Login</span><span class="idc-r"></span></a> <div class="idc-share" onmouseover="showFollowThisDiscussion();" onmouseout="hideFollowThisDiscussion();"> <div class="idc-share_inner" id="IDCommentsHeadFollowMenu" onmouseover="showFollowThisDiscussion();" onmouseout="hideFollowThisDiscussion();"> <ul class="idc-share-tabs" onmouseover="showFollowThisDiscussion();" onmouseout="hideFollowThisDiscussion();"> <li id="IDShareMenuPost" class="idc-sel"><a href="javascript: IDShowFollowPost();"><span>This blog post</span></a></li> <li id="IDShareMenuBlog"><a href="javascript: IDShowFollowBlog();"><span>All blog posts</span></a></li> </ul> <div id="divIdcSharePost" onmouseover="showFollowThisDiscussion();" onmouseout="hideFollowThisDiscussion();"> <p>Subscribe to this blog post's comments through...</p> <ul class="idc-share-list"> <li><a href="https://www.netvibes.com/subscribe.php?type=rss&amp;url=https://www.intensedebate.com/postRSS/197996288"><img id="IDCommentsShowNetvibes" width="91" height="17" border="0" alt="Add to netvibes"></a></li> <li><a href="https://add.my.yahoo.com/rss?url=https://www.intensedebate.com/postRSS/197996288"><img id="IDCommentsShowYahoo" border="0" alt="Add to My Yahoo!"></a></li> </ul> <ul class="idc-share-list"> <li><a href="https://fusion.google.com/add?source=atgs&amp;feedurl=https://www.intensedebate.com/postRSS/197996288"><img id="IDCommentsShowGoogle" border="0" alt="Add to Google"></a></li> <li><a href="https://my.msn.com/addtomymsn.armx?id=rss&amp;ut=https://www.intensedebate.com/postRSS/197996288"><img id="IDCommentsShowMsn" border="0" style="width: 92px; height: 17px;" alt="Add to Microsoft Live"></a></li> </ul> <p class="idc-b"><a href="https://www.intensedebate.com/postRSS/197996288"><img id="IDCommentsShowRss" alt="RSS Icon"> RSS Feed</a></p> <div class="idc-subscribe-email"> <p><strong>Subscribe via email</strong></p> <span id="IDCSubscribeSpan0"><input type="text" value="Email Address" id="IDCSubscribeEmail0" class="idc-text" onfocus="this.style.color=&#39;#333&#39;;this.value=&#39;&#39;;" onblur="if(this.value==&#39;&#39;){this.style.color=&#39;#ccc&#39;;this.value=&#39;Email Address&#39;;}"></span> <span id="IDCSubscribeSubmit0"><a class="idc-btn_s" href="javascript:IDCSubscribeByEmail(0);"><span></span><span class="idc-r">Subscribe</span></a> </span> </div> </div> <div id="divIdcShareBlog" style="display:none" onmouseover="showFollowThisDiscussion();" onmouseout="hideFollowThisDiscussion();"> <p>Subscribe to this blog's comments through...</p> <ul class="idc-share-list"> <li><a href="https://www.netvibes.com/subscribe.php?type=rss&amp;url=https://www.intensedebate.com/allBlogCommentsRSS/374386"><img id="IDCommentsShowNetvibes2" width="91" height="17" border="0" alt="Add to netvibes"></a></li> <li><a href="https://add.my.yahoo.com/rss?url=https://www.intensedebate.com/allBlogCommentsRSS/374386"><img border="0" alt="Add to My Yahoo!" id="IDCommentsShowYahoo2"></a></li> </ul> <ul class="idc-share-list"> <li><a href="https://fusion.google.com/add?source=atgs&amp;feedurl=https://www.intensedebate.com/allBlogCommentsRSS/374386"><img id="IDCommentsShowGoogle2" border="0" alt="Add to Google"></a></li> <li><a href="https://my.msn.com/addtomymsn.armx?id=rss&amp;ut=https://www.intensedebate.com/allBlogCommentsRSS/374386"><img border="0" id="IDCommentsShowMsn2" style="width: 92px; height: 17px;" alt="Add to Microsoft Live"></a></li> </ul> <p class="idc-b"><a href="https://www.intensedebate.com/allBlogCommentsRSS/374386"><img alt="RSS Icon" id="IDCommentsShowRss2"> RSS Feed</a></p> <div class="idc-subscribe-email"> <p><strong>Subscribe via email</strong></p> <span id="IDCSubscribeSpan1"><input type="text" value="Email Address" id="IDCSubscribeEmail1" class="idc-text" onfocus="this.style.color=&#39;#333&#39;;this.value=&#39;&#39;;" onblur="if(this.value==&#39;&#39;){this.style.color=&#39;#ccc&#39;;this.value=&#39;Email Address&#39;;}"></span> <span id="IDCSubscribeSubmit1"><a class="idc-btn_s" href="javascript:IDCSubscribeByEmail(1);"><span></span><span class="idc-r">Subscribe</span></a> </span> </div> </div> </div> <a href="https://www.intensedebate.com/postRSS/197996288" class="idc-head_tools-share" title="https://www.intensedebate.com/postRSS/197996288" onmouseover="showFollowThisDiscussion();" onmouseout="hideFollowThisDiscussion();">Follow the discussion</a> </div> </div><h3><span id="idc-commentcount_label">Comments</span><span id="idc-commentcount_wrap"> (<span id="idc-commentcount">21</span>)</span></h3><input type="hidden" id="userid" value=""> <div class="idc-head_action idc-loggingin"> <span><img style="padding-right: 5px" src="./A instrução Python _with_ por exemplo_files/ajax-loader.gif" alt="Loading..."> Logging you in...</span> </div> <div class="idc-head_action idc-login" id="IDLoginPopup"> <form id="IDfrmHeaderLogin" method="post" action="https://www.intensedebate.com/login"> <a href="javascript: hideLoginSignup();" class="idc-close"><span>Close</span></a> <p><strong>Login to IntenseDebate</strong></p> <p>Or <a href="https://www.intensedebate.com/signup" class="snap_noshots" target="_blank">create an account</a></p> <div class="idc-columns"> <div class="idc-divide"> <label for="IDtxtLoginEmail">Username or Email:</label> </div> <div class="idc-divide"> <label for="IDtxtLoginPass">Password:</label> </div> <span class="idc-clear"></span> </div> <div class="idc-divide"> <input id="IDtxtLoginEmail" name="txtLoginEmail" value="" class="idc-text" onfocus="txtOnFocus(this, &#39;&#39;);" onblur="txtOnBlur(this, &#39;&#39;);" type="text"> </div> <div class="idc-divide"> <input id="IDtxtLoginPass" name="txtLoginPass" class="idc-text idc-password" onfocus="txtOnFocus(this, &#39;&#39;);" onblur="txtOnBlur(this, &#39;&#39;);" type="password"> <p class="idc-fade"><a href="javascript: showForgotPassword();" class="snap_noshots">Forgot login?</a></p> </div> <div class="idc-head_b"> <div class="idc-tools"> <a class="idc-btn_l-secondary" href="javascript: hideLoginSignup();"><span></span><span class="idc-r">Cancel</span></a> <a href="javascript: logUserIn();" class="idc-btn_l"><span></span><span class="idc-r"><strong>Login</strong></span></a> </div> </div> </form> </div> <div class="idc-head_action idc-wp-login" id="IDWPLoginPopup"> <form id="IDfrmHeaderWPLogin" method="post" action="https://www.intensedebate.com/wp-login.php"> <a href="javascript: hideLoginSignup();" class="idc-close"><span>Close</span></a> <span> <img src="./A instrução Python _with_ por exemplo_files/wordpress-logo.png" style="margin-bottom: -10px;"> <span style="font-size: 25px; padding-left: 5px; font-family: verdana,serif;">WordPress.com</span> </span> <div class="idc-columns" style="padding-top: 20px;"> <div class="idc-divide"> <label for="IDtxtWPLoginEmail">Username or Email:</label> </div> <div class="idc-divide"> <label for="IDtxtWPLoginPass">Password:</label> </div> <span class="idc-clear"></span> </div> <div class="idc-divide"> <input id="IDtxtWPLoginEmail" name="txtLoginEmail" value="" class="idc-text" onfocus="txtOnFocus(this, &#39;&#39;);" onblur="txtOnBlur(this, &#39;&#39;);" type="text"> </div> <div class="idc-divide"> <input id="IDtxtWPLoginPass" name="txtLoginPass" class="idc-text idc-password" onfocus="txtOnFocus(this, &#39;&#39;);" onblur="txtOnBlur(this, &#39;&#39;);" type="password"> <p class="idc-fade"><a href="https://wordpress.com/wp-login.php?action=lostpassword" target="_new" class="snap_noshots">Lost your password?</a></p> </div> <div class="idc-head_b"> <div class="idc-tools"> <input type="hidden" name="IDtxtWPIDSiteID" value="374386"> <a class="idc-btn_l-secondary" href="javascript: hideLoginSignup();"><span></span><span class="idc-r">Cancel</span></a> <a href="javascript: IDC.$(&#39;IDfrmHeaderWPLogin&#39;).submit()" class="idc-btn_l"><span></span><span class="idc-r"><strong>Login</strong></span></a> </div> </div> </form> </div> <div class="idc-head_action idc-user"> <div class="idc-right"> <a class="snap_noshots" href="https://www.intensedebate.com/userDash">Dashboard</a> <span class="idc-divider"><span>|</span></span> <a class="snap_noshots" href="https://www.intensedebate.com/editprofile">Edit profile</a> <span class="idc-divider"><span>|</span></span> <a class="snap_noshots" href="https://www.intensedebate.com/logout?_id_nonce=" id="idc-logout-link">Logout</a> </div> <div> <a id="IDCommentUserBarLink1" href="https://www.intensedebate.com/people/0" class="idc-a snap_noshots"></a> </div> <ul class="idc-user_i"> <li>Logged in as <a id="IDCommentUserBarLink2" class="snap_noshots" href="https://www.intensedebate.com/people/0"></a></li> </ul> <div class="idc-user_admin" id="idc-user_admin" style="display:none;"> <p><a href="javascript:showHideOpts();" id="IDAdminOptsLink" class="idc-collapselink_closed snap_noshots">Admin Options</a></p> <div id="showHideAdminOpts" style="display:none;"> <p> <input type="hidden" id="IDUserAdminVal" value="0"> <span onclick="javascript: changeDisabledLink();"><label for="chkDisableIDC" class="idc-nofloat"><input type="checkbox" id="chkDisableIDC" checked="1"> Disable comments for this page</label></span> </p><p><a id="adminOptions" class="idc-btn_s snap_noshots"><span></span><span class="idc-r" id="IDCSavedSettings">Save Settings</span></a></p> <p></p> </div> </div> </div> <div class="idc-toolbar" id="idc-toolbar"> <div id="idc-sortLinks"> <p>Sort by: <a id="IDSortLink1" href="javascript: sortComments(1);" class="idc-sel">Date</a> <a id="IDSortLink0" href="javascript: sortComments(0);">Rating</a> <a id="IDSortLink2" href="javascript: sortComments(2);">Last Activity</a></p> </div> <div id="idc-sortLinksLoading" style="display:none"> Loading comments... </div> </div><span class="idc-clear"></span> <div class="idc-message"> <strong>Commenting Disabled</strong><br> Further commenting on this page has been disabled by the blog admin. </div></div><div id="idc-cover" class="idc-comments">	<div class="idc-thread" id="IDThread721194724"><div id="IDComment721194724" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore721194724">+2</span> <a class="idc-v-up" href="javascript: voteComment(721194724, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(721194724, 0)"><span>Vote down</span></a> </div> <span class="idc-a"><img alt="avatar do toco" src="./A instrução Python _with_ por exemplo_files/d1e0e0bfbb0e10ffa41b5fe8958e4239.jpeg" height="26" width="26" class="idc-avatar"> </span> <p class="idc-i"> <span> stump </span> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment721194724" id="IDCommentTime721194724" class="IDCommentTime">545 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop721194724" class="idc-c-t"> <div id="IDComment-CommentText721194724" class="idc-c-t-inner"> Those are awesome demos of how the with statement can simplify code, but the examples violate PEP 343's suggested naming convention for context managers, which the context managers in the standard library obey. <br> <br>Just the name "saving" implies that the context manager will do nothing in __enter__ and will do something that can be described as "saving" in __exit__. (See, for example, contextlib.closing().) <br> <br>It would be better if it were called "saved", indicating that __enter__ places the object in a state that can be described as "saved", and that this is undone upon __exit__. <br> <br>(Relatedly, perhaps this naming convention should be mentioned in the article.) <br> <br>Just my two cents. </div> </div> <div id="IDCommentBottom721194724" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight721194724"> </div> <div id="IDCommentPostReplyLink721194724"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <a href="javascript: collapseThread(721194724);" id="IDCommentCollapseLink721194724" class="idc-collapselink">2 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime721194724" class="IDCommentThreadTimeRead">active 378 weeks ago</span></em> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread721194724" class="idc-thread"><div id="IDComment721194728" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore721194728">+2</span> <a class="idc-v-up" href="javascript: voteComment(721194728, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(721194728, 0)"><span>Vote down</span></a> </div> <a href="http://preshing.com/" class="idc-a"><img alt="avatar de - Ir para o perfil" src="./A instrução Python _with_ por exemplo_files/61da29e47921b97570c793aaf39d8170.jpeg" height="26" width="26" class="idc-avatar"> </a> <p class="idc-i"> <a href="http://preshing.com/" rel="nofollow"> Jeff Preshing </a> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment721194728" id="IDCommentTime721194728" class="IDCommentTime">545 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop721194728" class="idc-c-t"> <div id="IDComment-CommentText721194728" class="idc-c-t-inner"> Thanks for pointing this out. I've gone ahead and changed the name based on your feedback. </div> </div> <div id="IDCommentBottom721194728" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight721194728"> </div> <div id="IDCommentPostReplyLink721194728"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread721194728" class="idc-thread"></div><div id="IDComment924914662" class="idc-c idc-anonymous idc-facebook"><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore924914662">+2</span> <a class="idc-v-up" href="javascript: voteComment(924914662, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(924914662, 0)"><span>Vote down</span></a> </div> <a href="https://www.facebook.com/stephen.stack.92" class="idc-a"><img alt="avatar de - Ir para o perfil" src="./A instrução Python _with_ por exemplo_files/picture" height="26" width="26" class="idc-avatar"> <img class="idc-a-facebook" src="./A instrução Python _with_ por exemplo_files/icon-facebook-small.png" width="16" height="16"> </a> <p class="idc-i"> <a href="https://www.facebook.com/stephen.stack.92" rel="nofollow"> Stephen Stack </a> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment924914662" id="IDCommentTime924914662" class="IDCommentTime">378 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop924914662" class="idc-c-t"> <div id="IDComment-CommentText924914662" class="idc-c-t-inner"> Good feedback, naming is extremely in all languages, especially in such an expressive syntax like Python. </div> </div> <div id="IDCommentBottom924914662" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight924914662"> </div> <div id="IDCommentPostReplyLink924914662"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread924914662" class="idc-thread"></div></div></div>	<div class="idc-thread" id="IDThread721194732"><div id="IDComment721194732" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore721194732">+3</span> <a class="idc-v-up" href="javascript: voteComment(721194732, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(721194732, 0)"><span>Vote down</span></a> </div> <span class="idc-a"><img alt="avatar de Pierre" src="./A instrução Python _with_ por exemplo_files/da6b8ea15cbf9a438dc47d4944f3fb98" height="26" width="26" class="idc-avatar"> </span> <p class="idc-i"> <span> Pierre </span> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment721194732" id="IDCommentTime721194732" class="IDCommentTime">516 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop721194732" class="idc-c-t"> <div id="IDComment-CommentText721194732" class="idc-c-t-inner"> Thanks a lot for those examples!!! It was very usefull! </div> </div> <div id="IDCommentBottom721194732" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight721194732"> </div> <div id="IDCommentPostReplyLink721194732"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper721194732"><a href="javascript: collapseThread(721194732);" id="IDCommentCollapseLink721194732" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime721194732" class="IDCommentThreadTimeRead">active 441 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread721194732" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread721194736"><div id="IDComment721194736" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore721194736">+2</span> <a class="idc-v-up" href="javascript: voteComment(721194736, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(721194736, 0)"><span>Vote down</span></a> </div> <span class="idc-a"><img alt="avatar de Hassan" src="./A instrução Python _with_ por exemplo_files/68d3a705b695e76e3ac73c5dfd31c86b.jpeg" height="26" width="26" class="idc-avatar"> </span> <p class="idc-i"> <span> Hassan </span> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment721194736" id="IDCommentTime721194736" class="IDCommentTime">503 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop721194736" class="idc-c-t"> <div id="IDComment-CommentText721194736" class="idc-c-t-inner"> Thanks for this helpful description. </div> </div> <div id="IDCommentBottom721194736" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight721194736"> </div> <div id="IDCommentPostReplyLink721194736"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper721194736"><a href="javascript: collapseThread(721194736);" id="IDCommentCollapseLink721194736" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime721194736" class="IDCommentThreadTimeRead">active 441 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread721194736" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread721194738"><div id="IDComment721194738" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore721194738">+2</span> <a class="idc-v-up" href="javascript: voteComment(721194738, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(721194738, 0)"><span>Vote down</span></a> </div> <span class="idc-a"><img alt="Avatar de Bah Mait" src="./A instrução Python _with_ por exemplo_files/aaee5e09f4d17bd810fabaa66bc7aa80.jpeg" height="26" width="26" class="idc-avatar"> </span> <p class="idc-i"> <span> Bah Mait </span> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment721194738" id="IDCommentTime721194738" class="IDCommentTime">496 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop721194738" class="idc-c-t"> <div id="IDComment-CommentText721194738" class="idc-c-t-inner"> This is really clear - thank you </div> </div> <div id="IDCommentBottom721194738" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight721194738"> </div> <div id="IDCommentPostReplyLink721194738"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper721194738"><a href="javascript: collapseThread(721194738);" id="IDCommentCollapseLink721194738" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime721194738" class="IDCommentThreadTimeRead">active 441 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread721194738" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread721194743"><div id="IDComment721194743" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore721194743">+2</span> <a class="idc-v-up" href="javascript: voteComment(721194743, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(721194743, 0)"><span>Vote down</span></a> </div> <a href="http://hirelco.net/" class="idc-a"><img alt="avatar de - Ir para o perfil" src="./A instrução Python _with_ por exemplo_files/ad7dc905b780c0934f9278e1d874fb44" height="26" width="26" class="idc-avatar"> </a> <p class="idc-i"> <a href="http://hirelco.net/" rel="nofollow"> Rod </a> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment721194743" id="IDCommentTime721194743" class="IDCommentTime">482 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop721194743" class="idc-c-t"> <div id="IDComment-CommentText721194743" class="idc-c-t-inner"> Finally! I now understand what with is used for. I couldn't grok it until I knew how it worked under the hood. Thanks a lot! </div> </div> <div id="IDCommentBottom721194743" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight721194743"> </div> <div id="IDCommentPostReplyLink721194743"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper721194743"><a href="javascript: collapseThread(721194743);" id="IDCommentCollapseLink721194743" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime721194743" class="IDCommentThreadTimeRead">active 441 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread721194743" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread721194747"><div id="IDComment721194747" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore721194747">+2</span> <a class="idc-v-up" href="javascript: voteComment(721194747, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(721194747, 0)"><span>Vote down</span></a> </div> <span class="idc-a"><img alt="Avatar de Nic Watson" src="./A instrução Python _with_ por exemplo_files/176b49629e04d161247b8be484212977" height="26" width="26" class="idc-avatar"> </span> <p class="idc-i"> <span> Nic Watson </span> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment721194747" id="IDCommentTime721194747" class="IDCommentTime">471 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop721194747" class="idc-c-t"> <div id="IDComment-CommentText721194747" class="idc-c-t-inner"> Awesome article! </div> </div> <div id="IDCommentBottom721194747" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight721194747"> </div> <div id="IDCommentPostReplyLink721194747"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper721194747"><a href="javascript: collapseThread(721194747);" id="IDCommentCollapseLink721194747" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime721194747" class="IDCommentThreadTimeRead">active 441 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread721194747" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread721194753"><div id="IDComment721194753" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore721194753">+2</span> <a class="idc-v-up" href="javascript: voteComment(721194753, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(721194753, 0)"><span>Vote down</span></a> </div> <span class="idc-a"><img alt="avatar de Le23" src="./A instrução Python _with_ por exemplo_files/c408b6f5b5fb397e3fa2fd7b0bd34ebb.jpeg" height="26" width="26" class="idc-avatar"> </span> <p class="idc-i"> <span> Le23 </span> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment721194753" id="IDCommentTime721194753" class="IDCommentTime">470 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop721194753" class="idc-c-t"> <div id="IDComment-CommentText721194753" class="idc-c-t-inner"> Thank you for blogging it clearly here. </div> </div> <div id="IDCommentBottom721194753" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight721194753"> </div> <div id="IDCommentPostReplyLink721194753"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper721194753"><a href="javascript: collapseThread(721194753);" id="IDCommentCollapseLink721194753" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime721194753" class="IDCommentThreadTimeRead">active 441 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread721194753" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread721194755"><div id="IDComment721194755" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore721194755">+2</span> <a class="idc-v-up" href="javascript: voteComment(721194755, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(721194755, 0)"><span>Vote down</span></a> </div> <a href="http://www.devilsan.com/blog.html" class="idc-a"><img alt="avatar de - Ir para o perfil" src="./A instrução Python _with_ por exemplo_files/62575f17ef5e2f3907b7c535158e120d.png" height="26" width="26" class="idc-avatar"> </a> <p class="idc-i"> <a href="http://www.devilsan.com/blog.html" rel="nofollow"> san </a> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment721194755" id="IDCommentTime721194755" class="IDCommentTime">464 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop721194755" class="idc-c-t"> <div id="IDComment-CommentText721194755" class="idc-c-t-inner"> useful... </div> </div> <div id="IDCommentBottom721194755" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight721194755"> </div> <div id="IDCommentPostReplyLink721194755"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper721194755"><a href="javascript: collapseThread(721194755);" id="IDCommentCollapseLink721194755" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime721194755" class="IDCommentThreadTimeRead">active 441 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread721194755" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread721194757"><div id="IDComment721194757" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore721194757">+2</span> <a class="idc-v-up" href="javascript: voteComment(721194757, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(721194757, 0)"><span>Vote down</span></a> </div> <a href="http://www.murphyrandle.com/" class="idc-a"><img alt="avatar de - Ir para o perfil" src="./A instrução Python _with_ por exemplo_files/2c0fd326ab65defb75ad1aebd7b464dd.jpeg" height="26" width="26" class="idc-avatar"> </a> <p class="idc-i"> <a href="http://www.murphyrandle.com/" rel="nofollow"> Murphy Randle </a> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment721194757" id="IDCommentTime721194757" class="IDCommentTime">455 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop721194757" class="idc-c-t"> <div id="IDComment-CommentText721194757" class="idc-c-t-inner"> Simplest explanation I've seen yet of the "with" statement. <br>Thank you! </div> </div> <div id="IDCommentBottom721194757" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight721194757"> </div> <div id="IDCommentPostReplyLink721194757"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper721194757"><a href="javascript: collapseThread(721194757);" id="IDCommentCollapseLink721194757" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime721194757" class="IDCommentThreadTimeRead">active 441 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread721194757" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread749589917"><div id="IDComment749589917" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore749589917">+2</span> <a class="idc-v-up" href="javascript: voteComment(749589917, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(749589917, 0)"><span>Vote down</span></a> </div> <span class="idc-a"><img alt="avatar de luis romero" src="./A instrução Python _with_ por exemplo_files/259f664391cc5aa10fc0d4fff6ab5b3b.png" height="26" width="26" class="idc-avatar"> </span> <p class="idc-i"> <span> Luis romero </span> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment749589917" id="IDCommentTime749589917" class="IDCommentTime">433 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop749589917" class="idc-c-t"> <div id="IDComment-CommentText749589917" class="idc-c-t-inner"> Just Awesome (O.O) </div> </div> <div id="IDCommentBottom749589917" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight749589917"> </div> <div id="IDCommentPostReplyLink749589917"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper749589917"><a href="javascript: collapseThread(749589917);" id="IDCommentCollapseLink749589917" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime749589917" class="IDCommentThreadTimeRead">active 433 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread749589917" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread880219402"><div id="IDComment880219402" class="idc-c "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-m" id="IDUserMenu880219402" onmouseover="clearTimeout( IDC.popupMenuTimeout );" onmouseout="IDC.popupMenuTimeout = setTimeout( &#39;IDC.user_menu.hide(880219402);&#39;, 250 );"> <div class="idc-m-avatar idc-m-avatar-loading"> <img alt="Loading..." src="./A instrução Python _with_ por exemplo_files/idc-m-loading.gif" class="idc-m-loadingimg"> </div> </div> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore880219402">+3</span> <a class="idc-v-up" href="javascript: voteComment(880219402, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(880219402, 0)"><span>Vote down</span></a> </div> <a href="https://www.intensedebate.com/profiles/vindolin" class="idc-a" onmouseover="IDC.user_menu.show(&#39;IDUserMenu880219402&#39;, 10246955)"><img src="./A instrução Python _with_ por exemplo_files/14d798d5c8699a7d4506dc7393c5d0a8" class="idc-avatar" alt="avatar do vindolin - Ir para o perfil"> <img class="idc-a-facebook" src="./A instrução Python _with_ por exemplo_files/wordpress-favicon.ico" width="16" height="16"></a> <p class="idc-i"> <a href="https://www.intensedebate.com/profiles/vindolin">vindolin</a> <span class="idc-rep idc-level0" title="User&#39;s reputation score. The better commenter, the greater number."><span></span><span class="idc-r" onclick="showReputationWhy(880219402);">0p</span></span> <em class="idc-time"> ·  <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment880219402" id="IDCommentTime880219402" class="IDCommentTime">388 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop880219402" class="idc-c-t"> <div id="IDComment-CommentText880219402" class="idc-c-t-inner"> I was working on a program with lots of cairo calls and thought to myself: I should replace all those save/restore's with a context manager, googled for "python context with" and landed on this page.. destiny.. :) </div> </div> <div id="IDCommentBottom880219402" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight880219402"> </div> <div id="IDCommentPostReplyLink880219402"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper880219402"><a href="javascript: collapseThread(880219402);" id="IDCommentCollapseLink880219402" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime880219402" class="IDCommentThreadTimeRead">active 388 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread880219402" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread962769082"><div id="IDComment962769082" class="idc-c idc-anonymous idc-facebook"><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore962769082">+2</span> <a class="idc-v-up" href="javascript: voteComment(962769082, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(962769082, 0)"><span>Vote down</span></a> </div> <a href="https://www.facebook.com/liangmaing" class="idc-a"><img alt="avatar de - Ir para o perfil" src="./A instrução Python _with_ por exemplo_files/picture(1)" height="26" width="26" class="idc-avatar"> <img class="idc-a-facebook" src="./A instrução Python _with_ por exemplo_files/icon-facebook-small.png" width="16" height="16"> </a> <p class="idc-i"> <a href="https://www.facebook.com/liangmaing" rel="nofollow"> Liang Ma </a> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment962769082" id="IDCommentTime962769082" class="IDCommentTime">360 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop962769082" class="idc-c-t"> <div id="IDComment-CommentText962769082" class="idc-c-t-inner"> very useful </div> </div> <div id="IDCommentBottom962769082" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight962769082"> </div> <div id="IDCommentPostReplyLink962769082"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper962769082"><a href="javascript: collapseThread(962769082);" id="IDCommentCollapseLink962769082" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime962769082" class="IDCommentThreadTimeRead">active 360 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread962769082" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread1018711803"><div id="IDComment1018711803" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore1018711803">+2</span> <a class="idc-v-up" href="javascript: voteComment(1018711803, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(1018711803, 0)"><span>Vote down</span></a> </div> <span class="idc-a"><img alt="avatar de Ricardo" src="./A instrução Python _with_ por exemplo_files/fd5fbc96b7e2f85891b0f4a18d009a7d" height="26" width="26" class="idc-avatar"> </span> <p class="idc-i"> <span> Richard </span> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment1018711803" id="IDCommentTime1018711803" class="IDCommentTime">308 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop1018711803" class="idc-c-t"> <div id="IDComment-CommentText1018711803" class="idc-c-t-inner"> Many thanks for the great explanation! <br>Just one question if self.cr.save() or cr.save() were to cause an error on entry into the context manager (let's say it returned False for failure), is our only choice to raise an Exception and not yield? What if we would like to just not run the 'with' block at all on error? </div> </div> <div id="IDCommentBottom1018711803" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight1018711803"> </div> <div id="IDCommentPostReplyLink1018711803"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper1018711803"><a href="javascript: collapseThread(1018711803);" id="IDCommentCollapseLink1018711803" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime1018711803" class="IDCommentThreadTimeRead">active 308 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread1018711803" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread1026681794"><div id="IDComment1026681794" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore1026681794">+2</span> <a class="idc-v-up" href="javascript: voteComment(1026681794, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(1026681794, 0)"><span>Vote down</span></a> </div> <span class="idc-a"><img alt="avatar de steve" src="./A instrução Python _with_ por exemplo_files/avatar-normal.png" height="26" width="26" class="idc-avatar"> </span> <p class="idc-i"> <span> steve </span> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment1026681794" id="IDCommentTime1026681794" class="IDCommentTime">292 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop1026681794" class="idc-c-t"> <div id="IDComment-CommentText1026681794" class="idc-c-t-inner"> A very good explanation, thanks <br>Posted some sample code to further demo this <br> <br>class PR(): <br> def pr_open(self): <br> print("PR, open") <br> <br> def pr_whatsit(self,i): <br> print("PR, whatsit ",i) <br> <br> def pr_close(self): <br> print("PR, close (clean up resources)") <br><br>class MyContext(): <br> def __init__(self, pr): <br> self.pr = pr <br> print("MyContext, init") <br> <br> def __enter__(self): <br> self.pr.pr_open() <br> print("MyContext, enter, (I was called automatically at start of with block)") <br> return self.pr <br> def __exit__(self, type, value, traceback): <br> print("MyContext, exit (I was called automatically at end of with block, even it exception") <br> self.pr.pr_close() <br> <br>#We see that for with, that the exit method is called automatically, even if there <br>#is an exception, which allows for clean up of resources <br> <br>pr=PR() <br>with MyContext(pr): <br> pr.pr_whatsit(1) <br> pr.pr_whatsit(2) <br> raise "Error in block" <br> pr.pr_whatsit(3) <br> <br>run the program, shows what happens </div> </div> <div id="IDCommentBottom1026681794" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight1026681794"> </div> <div id="IDCommentPostReplyLink1026681794"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper1026681794"><a href="javascript: collapseThread(1026681794);" id="IDCommentCollapseLink1026681794" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime1026681794" class="IDCommentThreadTimeRead">active 292 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread1026681794" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread1032903798"><div id="IDComment1032903798" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore1032903798">+2</span> <a class="idc-v-up" href="javascript: voteComment(1032903798, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(1032903798, 0)"><span>Vote down</span></a> </div> <a href="http://www.selectedsolutions.net/" class="idc-a"><img alt="avatar de - Ir para o perfil" src="./A instrução Python _with_ por exemplo_files/259afd4c2f0e5c0e852ad57018ecceda" height="26" width="26" class="idc-avatar"> </a> <p class="idc-i"> <a href="http://www.selectedsolutions.net/" rel="nofollow"> OlyDLG </a> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment1032903798" id="IDCommentTime1032903798" class="IDCommentTime">279 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop1032903798" class="idc-c-t"> <div id="IDComment-CommentText1032903798" class="idc-c-t-inner"> First, thanks: I agree, generally, very clearly explained. Now, a sincere (i.e., non-rhetorical) question: given how much more complicated it seems, in this context, why would anyone ever choose the generator approach over the class approach: are there (classes of) use-cases where the generator approach is actually either simpler or performs better, or is it always simply a matter of taste? (Was the generator approach added later to appease Functionalists?) </div> </div> <div id="IDCommentBottom1032903798" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight1032903798"> </div> <div id="IDCommentPostReplyLink1032903798"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper1032903798"><a href="javascript: collapseThread(1032903798);" id="IDCommentCollapseLink1032903798" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime1032903798" class="IDCommentThreadTimeRead">active 261 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread1032903798" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread1038572102"><div id="IDComment1038572102" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore1038572102">+2</span> <a class="idc-v-up" href="javascript: voteComment(1038572102, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(1038572102, 0)"><span>Vote down</span></a> </div> <span class="idc-a"><img alt="Avatar de Patrick Duc" src="./A instrução Python _with_ por exemplo_files/eaea533b61140a76485f5e6e78533902" height="26" width="26" class="idc-avatar"> </span> <p class="idc-i"> <span> Patrick Duc </span> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment1038572102" id="IDCommentTime1038572102" class="IDCommentTime">264 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop1038572102" class="idc-c-t"> <div id="IDComment-CommentText1038572102" class="idc-c-t-inner"> Thanks a lot, very clear explanation. </div> </div> <div id="IDCommentBottom1038572102" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight1038572102"> </div> <div id="IDCommentPostReplyLink1038572102"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper1038572102"><a href="javascript: collapseThread(1038572102);" id="IDCommentCollapseLink1038572102" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime1038572102" class="IDCommentThreadTimeRead">active 264 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread1038572102" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread1045989686"><div id="IDComment1045989686" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore1045989686">+2</span> <a class="idc-v-up" href="javascript: voteComment(1045989686, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(1045989686, 0)"><span>Vote down</span></a> </div> <span class="idc-a"><img alt="avatar de ErnestoZ" src="./A instrução Python _with_ por exemplo_files/avatar-normal.png" height="26" width="26" class="idc-avatar"> </span> <p class="idc-i"> <span> ErnestoZ </span> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment1045989686" id="IDCommentTime1045989686" class="IDCommentTime">244 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop1045989686" class="idc-c-t"> <div id="IDComment-CommentText1045989686" class="idc-c-t-inner"> Great explanation of Python context managers. Kudos!!! </div> </div> <div id="IDCommentBottom1045989686" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight1045989686"> </div> <div id="IDCommentPostReplyLink1045989686"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper1045989686"><a href="javascript: collapseThread(1045989686);" id="IDCommentCollapseLink1045989686" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime1045989686" class="IDCommentThreadTimeRead">active 244 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread1045989686" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread1046482661"><div id="IDComment1046482661" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore1046482661">+2</span> <a class="idc-v-up" href="javascript: voteComment(1046482661, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(1046482661, 0)"><span>Vote down</span></a> </div> <span class="idc-a"><img alt="avatar do Rusty" src="./A instrução Python _with_ por exemplo_files/avatar-normal.png" height="26" width="26" class="idc-avatar"> </span> <p class="idc-i"> <span> Rusty </span> <em class="idc-time">· <a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment1046482661" id="IDCommentTime1046482661" class="IDCommentTime">242 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop1046482661" class="idc-c-t"> <div id="IDComment-CommentText1046482661" class="idc-c-t-inner"> Excellent article, it was very useful for me to see the possibilities of using the 'with' clause! <br> <br>Thank You for writing it! </div> </div> <div id="IDCommentBottom1046482661" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight1046482661"> </div> <div id="IDCommentPostReplyLink1046482661"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r">Reply</span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper1046482661"><a href="javascript: collapseThread(1046482661);" id="IDCommentCollapseLink1046482661" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime1046482661" class="IDCommentThreadTimeRead">active 242 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread1046482661" class="idc-thread"></div></div>	<div class="idc-thread" id="IDThread1046567841"><div id="IDComment1046567841" class="idc-c idc-anonymous "><div class="idc-c-h"> <div class="idc-c-h-inner"> <div class="idc-v"> <span class="idc-v-total" id="IDCommentVoteScore1046567841">+2</span> <a class="idc-v-up" href="javascript: voteComment(1046567841, 1)"><span>Vote up</span></a> <a class="idc-v-down" href="javascript: voteComment(1046567841, 0)"><span>Vote down</span></a> </div> <span class="idc-a"><img alt="avatar de Ofer" src="./A instrução Python _with_ por exemplo_files/1c0872840bced24019b1a0651625b469" height="26" width="26" class="idc-avatar"> </span> <p class="idc-i"> <span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oferta</font></font></span> <em class="idc-time"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">· </font></font><a title="Link permanente do comentário" href="https://preshing.com/20110920/the-python-with-statement-by-example/#IDComment1046567841" id="IDCommentTime1046567841" class="IDCommentTime">242 weeks ago</a></em> </p> </div></div> <div id="IDCommentTop1046567841" class="idc-c-t"> <div id="IDComment-CommentText1046567841" class="idc-c-t-inner"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Muito obrigado por este ótimo artigo. </font><font style="vertical-align: inherit;">É bem escrito e mais agradável!</font></font></div> </div> <div id="IDCommentBottom1046567841" class="idc-c-b"> <div class="idc-right" id="IDCommentLinksRight1046567841"> </div> <div id="IDCommentPostReplyLink1046567841"> <span class="idc-btn_s"><span><input type="hidden" id="reqUsersOn" value="no"></span><span class="idc-r"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Responder</font></font></span></span> </div> <span style="display: none" id="IDCommentCollapseLinkWrapper1046567841"><a href="javascript: collapseThread(1046567841);" id="IDCommentCollapseLink1046567841" class="idc-collapselink">0 replies </a> <em class="idc-thread_active">· <span id="IDCommentThreadTime1046567841" class="IDCommentThreadTimeRead">active 242 weeks ago</span></em></span> <span class="idc-clear"></span> </div></div><div id="IDCommentSubThread1046567841" class="idc-thread"></div></div></div>	<div id="IDCommentsNewThreadCover" class="idc-new" style="display:none;"> <a name="respond"></a> <h3>Post a new comment</h3> <div class="idc-thread" id="IDCThread"> <div style="width: 100%;" id="IDCommentsNewThread" class="idc-c idc-reply idc-anonymous idc-signup"> <div class="idc-c-h" id="IDCommentsNewThreadHeader" style="display: none;"> <div class="idc-right" id="IDCommentsNewThreadHeaderRight"> <div class="idc-expand"></div> </div> </div> <ul class="idc-c-plugins" id="idc-plugin-buttons-new-thread"></ul> <div class="idc-c-t"> <form id="IDCommentNewThreadForm1"> <div class="idc-c-t-inner"> <textarea class="idc-text_noresize" style="color:#CCC" id="IDCommentNewThreadText" onfocus="txtOnFocus(this, &#39;Enter text right here!&#39;);" onblur="txtOnBlur(this, &#39;Enter text right here!&#39;);">Enter text right here!</textarea> <span class="idc-clear"> </span></div> </form> </div> <div class="idc-postnav" id="IDCPostNav"> <p id="IDCNavGuest2" style="display: inline;" class="idc-postnav-label"><span>Comment as a Guest, or login:</span></p> <ul class="idc-postnav-list" id="IDCNavList"> <li class="idc-first"><a href="javascript: showLogin();" class="idc-loginbtn_intensedebate">Login to IntenseDebate</a></li> <li class="idc-first"><a href="javascript: showWPLogin();" class="idc-loginbtn_wordpress">Login to WordPress.com</a></li> <li><a href="javascript: IDC.twitter.load_popup();" class="idc-loginbtn_twitter">Login to Twitter</a></li> </ul> <a href="javascript: IDCNavReply(&#39;IDCNavGuest&#39;); showSignupNewThread(); id_fbStopPoll(); id_show_nav();" id="IDCNavGuest" style="display:none;margin:2px 0;line-height:21px;">Go back</a> </div> <div class="idc-c-m idc-twitter_loggedin"> <div class="idc-userbar"> <p class="idc-right"><label for="IDNewThreadTweetThis-tw" style="display:inline; line-height:28px;" class="idc-nofloat"><input type="checkbox" id="IDNewThreadTweetThis-tw"> Tweet this comment</label></p> <a class="idc-a_nomenu"><img id="id_twAvatar_NewThread" src="https://preshing.com/20110920/the-python-with-statement-by-example/" class="idc-avatar" width="26" height="26"><img id="id_twAvatar_NewThread-fav" src="./A instrução Python _with_ por exemplo_files/twitter-favicon.ico" style="margin: 13px 0 -1px -5px; width: 16px; height: 16px;" width="16" height="16" alt="Twitter"></a> <p class="idc-userbar-i"> Connected as <a href="https://preshing.com/20110920/the-python-with-statement-by-example/#" id="id_twName_NewThread" class="snap_noshots"></a> (<a href="https://www.intensedebate.com/twitter-logout.php" class="snap_noshots">Logout</a>) </p> </div> <div class="idc-column-wide"> <label for="txtEmailNewThreadTW">Email (optional)</label> <input type="text" id="txtEmailNewThreadTW" class="idc-text" onfocus="txtOnFocus(this, &#39;&#39;);" onblur="txtOnBlur(this, &#39;&#39;);"> <p></p> <p class="idc-form-info">Not displayed publicly.</p> </div> </div> <div class="idc-c-m idc-signup"> <form id="IDCommentNewThreadForm2"> <div style="width: 100%;"> <div class="idc-columns"> <div class="idc-column" id="IDCColumnNameLabel"> <label for="txtNameNewThread">Name</label> </div> <div class="idc-column" id="IDCColumnEmailLabel"> <label for="txtEmailNewThread">Email</label> </div> <div class="idc-column" id="IDCColumnURLLabel"> <label for="txtURLNewThread">Website (optional)</label> </div> <span class="idc-clear"></span> </div> <div class="idc-column" id="IDCColumnName"> <input type="text" id="txtNameNewThread" class="idc-text" onfocus="txtOnFocus(this, &#39;&#39;);" onblur="txtOnBlur(this, &#39;&#39;);"> <p class="idc-form-info">Displayed next to your comments.</p> </div> <div class="idc-column" id="IDCColumnEmailReply"> <input type="text" id="txtEmailNewThread" class="idc-text" onfocus="txtOnFocus(this, &#39;&#39;);" onblur="txtOnBlur(this, &#39;&#39;);"> <p class="idc-form-info">Not displayed publicly.</p> </div> <div class="idc-column" id="IDCColumnURL"> <input type="text" class="idc-text" id="txtURLNewThread" onfocus="txtOnFocus(this, &#39;&#39;);" onblur="txtOnBlur(this, &#39;&#39;);"> <p class="idc-form-info">If you have a website, link to it here.</p> </div> </div> </form> </div> <p id="IDCommentsNewThreadListItem1" style="display:none;">Posting anonymously.</p> <p id="IDNewThreadTweetThisWrapper" style="display:none"><label for="IDNewThreadTweetThis" class="idc-nofloat"><input type="checkbox" id="IDNewThreadTweetThis"> Tweet this comment</label></p> <div class="idc-c-b"> <div class="idc-right" id="IDNewThreadSubmitLI"> <a class="idc-btn_l" href="javascript: postComment(0);"><span></span><span class="idc-r"><strong>Submit Comment</strong></span></a> </div> <div class="idc-new_subscribe" id="IDSubscribeToThisWrapper"> <!--<input type="checkbox" id="IDSubscribeToThis" class="idc-chk" />--> <label for="IDSubscribeToThis" class="idc-nofloat"> Subscribe to <select id="IDSubscribeToThis" name="IDSubscribeToThis"> <option value="-1" id="IDSubscribeToThis-def">None</option> <option value="1" id="IDSubscribeToThis-replies">Replies</option> <option value="0">All new comments</option> </select> </label> </div> <div class="idc-customtext"> <span id="customText"></span> </div> <span class="idc-clear"></span> </div> </div> </div> </div> <div class="idc-foot"> <p class="idc-id"><span>Comments by </span><a href="https://www.intensedebate.com/" class="idc-idlogo" target="_blank">IntenseDebate</a></p> <span class="idc-clear"></span> </div><div id="divReplyExpandingText" class="idc-measure"></div><div id="divNewPostExpandingText" class="idc-measure"></div><div class="idc-c idc-reply idc-anonymous idc-signup" id="IDCommentReplyDiv" style="display: none;"><p class="idc-header" id="IDCommentReplyName"></p> <ul class="idc-c-plugins" id="idc-plugin-buttons-reply"></ul> <div class="idc-c-t"> <div class="idc-c-t-inner"> <form id="IDCommentReplyForm1"> <textarea id="txtComment" class="idc-text_noresize" onfocus="txtOnFocus(this, &#39;Enter text right here!&#39;);" onblur="txtOnBlur(this, &#39;Enter text right here!&#39;);">Enter text right here!</textarea> </form> <span class="idc-clear"> </span></div> </div> <div class="idc-postnav" id="IDCPostNavReply"> <p id="IDCNavGuestReply2" style="display: inline;" class="idc-postnav-label"><span>Reply as a Guest, or login:</span></p> <ul class="idc-postnav-list" id="IDCNavListReply"> <li class="idc-first"><a href="javascript: showLogin();" class="idc-loginbtn_intensedebate">Login to IntenseDebate</a></li> <li class="idc-first"><a href="javascript: showWPLogin();" class="idc-loginbtn_wordpress">Login to WordPress.com</a></li> <li><a href="javascript: IDC.twitter.load_popup();" class="idc-loginbtn_twitter">Login to Twitter</a></li> </ul> <a href="javascript: IDCNavReply(&#39;IDCNavGuestReply&#39;); showSignupReply(); id_fbStopPoll(); id_show_nav();" id="IDCNavGuestReply" style="display:none;margin:2px 0;line-height:21px;">Go back</a> </div> <div class="idc-c-m idc-twitter_loggedin"> <div class="idc-userbar"> <p class="idc-right"><label for="IDReplyTweetThis-tw" style="display:inline; line-height: 28px;" class="idc-nofloat"><input type="checkbox" id="IDReplyTweetThis-tw"> Tweet this comment</label></p> <a class="idc-a_nomenu"><img id="id_twAvatar_Reply" src="https://preshing.com/20110920/the-python-with-statement-by-example/" class="idc-avatar" width="26" height="26"><img id="id_twAvatar_Reply-fav" src="./A instrução Python _with_ por exemplo_files/twitter-favicon.ico" style="margin: 13px 0 -1px -5px; width: 16px; height: 16px;" width="16" height="16" alt="Twitter"></a> <p class="idc-userbar-i">Connected as <a href="https://preshing.com/20110920/the-python-with-statement-by-example/#" class="snap_noshots" id="id_twName_Reply"></a> (<a href="https://www.intensedebate.com/twitter-logout.php" class="snap_noshots">Logout</a>)</p> </div> <div class="idc-column-wide"> <label for="txtEmailReplyTW">Email (optional)</label> <input type="text" id="txtEmailReplyTW" class="idc-text" onfocus="txtOnFocus(this, &#39;&#39;);" onblur="txtOnBlur(this, &#39;&#39;);"> <p class="idc-form-info">Not displayed publicly.</p> </div> </div> <div class="idc-c-m idc-signup" id="IDCommentReplyOuterDiv"> <form id="IDCommentReplyForm2"> <div style="width: 100%;" id="IDCommentReplyInnerDiv"> <div class="idc-columns"> <div class="idc-column" id="IDCColumnNameReplyLabel"> <label for="txtNameReply">Name</label> </div> <div class="idc-column" id="IDCColumnEmailReplyLabel"> <label for="txtEmailReply">Email</label> </div> <div class="idc-column" id="IDCColumnURLReplyLabel"> <label for="txtURLReply">Website (optional)</label> </div> <span class="idc-clear"></span> </div> <div class="idc-column" id="IDCColumnNameReply"> <input type="text" id="txtNameReply" class="idc-text" onfocus="txtOnFocus(this, &#39;&#39;);" onblur="txtOnBlur(this, &#39;&#39;);"> <p class="idc-form-info">Displayed next to your comments.</p> </div> <div class="idc-column" id="IDCColumnEmailReply"> <input type="text" id="txtEmailReply" class="idc-text" onfocus="txtOnFocus(this, &#39;&#39;);" onblur="txtOnBlur(this, &#39;&#39;);"> <p class="idc-form-info">Not displayed publicly.</p> </div> <div class="idc-column" id="IDCColumnURLReply"> <input type="text" class="idc-text" id="txtURLReply" onfocus="txtOnFocus(this, &#39;&#39;);" onblur="txtOnBlur(this, &#39;&#39;);"> <p class="idc-form-info">If you have a website, link to it here.</p> </div> </div> </form> </div> <p id="IDCommentReplyListItem1" style="display:none;">Posting anonymously.</p> <p id="IDReplyTweetThisWrapper" style="display:none"><label for="IDReplyTweetThis" class="idc-nofloat"><input type="checkbox" id="IDReplyTweetThis"> Tweet this comment</label></p> <div class="idc-c-b"> <div class="idc-right" id="IDReplyDivSubmitLI"> <a href="javascript: hideReply();" class="idc-btn_l-secondary"><span></span><span class="idc-r">Cancel</span></a> <a id="IDReplyDivSubmitLIButton" class="idc-btn_l" href="javascript: postComment(1);"><span></span><span class="idc-r"><strong>Submit Comment</strong></span></a> </div> <div class="idc-new_subscribe" id="IDSubscribeToThisWrapperReply"> <!--<input type="checkbox" id="IDSubscribeToThisReply" class="idc-chk" />--> <label for="IDSubscribeToThisReply" class="idc-nofloat"> Subscribe to <select id="IDSubscribeToThisReply" name="IDSubscribeToThisReply"> <option value="-1" id="IDSubscribeToThisReply-def">None</option> <option value="1" id="IDSubscribeToThisReply-replies">Replies</option> <option value="0">All new comments</option> </select> </label> </div> <span class="idc-clear"></span> </div></div><iframe src="./A instrução Python _with_ por exemplo_files/empty.html" style="display: none;"></iframe><img src="./A instrução Python _with_ por exemplo_files/remoteCheckin.php" style="display: none;"></div><span id="idc-clear"></span></div><script type="text/javascript" src="./A instrução Python _with_ por exemplo_files/197996288"></script><script type="text/javascript" src="./A instrução Python _with_ por exemplo_files/genericCommentWrapperV2.js.download"></script>
</div>
</section>


</div>

<aside class="sidebar">
  
    <section>
  <a href="https://plywood.arc80.com/"><p style="margin-bottom:0.8em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Confira </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plywood</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , uma estrutura C++ de plataforma cruzada e de código aberto:</font></font></p>
  <img srcset="/images/plywood-button.png 1x,/images/plywood-button@2x.png 2x" src="./A instrução Python _with_ por exemplo_files/plywood-button.png" width="165"></a>
</section>
<section>
  <h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Postagens recentes</font></font></h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="https://preshing.com/20210315/how-cpp-resolves-a-function-call"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como C++ resolve uma chamada de função</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20201210/flap-hero-code-review"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Revisão do código do Flap Hero</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20201126/a-small-open-source-game-in-cpp"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um pequeno jogo de código aberto em C++</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20200727/automatically-detecting-text-encodings-in-cpp"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Detectando automaticamente codificações de texto em C++</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20200708/io-in-plywood"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E/S em compensado</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20200526/a-new-cross-platform-open-source-cpp-framework"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um novo framework C++ de código aberto multiplataforma</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20180124/a-flexible-reflection-system-in-cpp-part-2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um sistema de reflexão flexível em C++: parte 2</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20180116/a-primitive-reflection-system-in-cpp-part-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um Sistema de Reflexão Flexível em C++: Parte 1</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20171218/how-to-write-your-own-cpp-game-engine"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como escrever seu próprio mecanismo de jogo C++</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20170612/can-reordering-of-release-acquire-operations-introduce-deadlock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A reordenação de operações de liberação/aquisição pode introduzir impasse?</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20170529/heres-a-standalone-cairo-dll-for-windows"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui está uma DLL autônoma do Cairo para Windows</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20170522/learn-cmakes-scripting-language-in-15-minutes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aprenda a linguagem de script do CMake em 15 minutos</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20170511/how-to-build-a-cmake-based-project"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como construir um projeto baseado em CMake</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20160726/using-quiescent-states-to-reclaim-memory"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usando estados inativos para recuperar a memória</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20160314/leapfrog-probing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leapfrog Probing</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20160222/a-resizable-concurrent-map"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um mapa simultâneo redimensionável</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20160201/new-concurrent-hash-maps-for-cpp"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Novos mapas de hash simultâneos para C++</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20150402/you-can-do-any-kind-of-atomic-read-modify-write-operation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Você pode fazer qualquer tipo de operação atômica de leitura-modificação-gravação</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20150324/safe-bitfields-in-cpp"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Campos de bits seguros em C++</font></font></a>
      </li>
    
      <li class="post">
        <a href="https://preshing.com/20150316/semaphores-are-surprisingly-versatile"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os semáforos são surpreendentemente versáteis</font></font></a>
      </li>
    
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  Copyright © 2021 Jeff Preshing -
   </font></font><span class="credit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desenvolvido por </font></font><a href="http://octopress.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Octopress</font></font></a></span>
</p>

</footer>
  













<div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./A instrução Python _with_ por exemplo_files/translate_24dp.png" width="20" height="20" alt="Google Tradutor"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">Texto original</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">Sugerir uma tradução melhor</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div><div class="idc-loaded" id="IDCommentLoadingDiv" style="display: block;"></div><div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body></html>